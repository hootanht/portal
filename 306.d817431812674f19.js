"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[306],{5557:(L,D,s)=>{s.r(D),s.d(D,{TeamModule:()=>ze});var v=s(458),d=s(671),e=s(4650),b=s(1281),l=s(3238),A=s(8929);s(7340);const m=new e.InjectionToken("MAT_SORT_DEFAULT_OPTIONS"),f=(0,l.dB)((0,l.Id)(class{}));let g=(()=>{class t extends f{get direction(){return this._direction}set direction(n){this._direction=n}get disableClear(){return this._disableClear}set disableClear(n){this._disableClear=(0,b.Ig)(n)}constructor(n){super(),this._defaultOptions=n,this.sortables=new Map,this._stateChanges=new A.xQ,this.start="asc",this._direction="",this.sortChange=new e.EventEmitter}register(n){this.sortables.set(n.id,n)}deregister(n){this.sortables.delete(n.id)}sort(n){this.active!=n.id?(this.active=n.id,this.direction=n.start?n.start:this.start):this.direction=this.getNextSortDirection(n),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(n){if(!n)return"";let r=function _(t,a){let n=["asc","desc"];return"desc"==t&&n.reverse(),a||n.push(""),n}(n.start||this.start,n?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),u=r.indexOf(this.direction)+1;return u>=r.length&&(u=0),r[u]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(m,8))},t.\u0275dir=e.\u0275\u0275defineDirective({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature]}),t})();var T=s(4859),X=s(1576),F=s(7392);function Q(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",16),e.\u0275\u0275text(1," \u0646\u0627\u0645 "),e.\u0275\u0275elementEnd())}function J(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function W(t,a){1&t&&e.\u0275\u0275element(0,"th",16)}function Z(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.index;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n+1," ")}}function K(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",16),e.\u0275\u0275text(1," \u0631\u0634\u062a\u0647 "),e.\u0275\u0275elementEnd())}function q(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.fieldName," ")}}function ee(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",16),e.\u0275\u0275text(1," \u0631\u062f\u0647 "),e.\u0275\u0275elementEnd())}function te(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.subFieldName," ")}}function ne(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1," \u06af\u0631\u0648\u0647 \u0633\u0646\u06cc "),e.\u0275\u0275elementEnd())}function ae(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.ageRangeName," ")}}function ie(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1," \u062a\u0639\u062f\u0627\u062f \u0628\u0627\u0632\u06cc\u06a9\u0646 "),e.\u0275\u0275elementEnd())}function oe(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.players," ")}}function re(t,a){1&t&&e.\u0275\u0275element(0,"th",18)}function se(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",17)(1,"button",19)(2,"mat-icon"),e.\u0275\u0275text(3," visibility"),e.\u0275\u0275elementEnd()()()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",n.id)}}function le(t,a){1&t&&(e.\u0275\u0275elementStart(0,"tr",20)(1,"td",21),e.\u0275\u0275text(2,"\u062a\u06cc\u0645\u06cc \u0628\u0647 \u0633\u0631\u067e\u0631\u0633\u062a\u06cc \u0634\u0645\u0627 \u062a\u0639\u0631\u06cc\u0641 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a."),e.\u0275\u0275elementEnd()())}function me(t,a){1&t&&e.\u0275\u0275element(0,"tr",22)}function de(t,a){1&t&&e.\u0275\u0275element(0,"tr",23)}let ce=(()=>{class t{constructor(n){this._activatedRoute=n,this.displayedColumns=["index","name","fieldName","subFieldName","ageRangeName","players","action"],this._teams=n.snapshot.data.teams}ngAfterViewInit(){this.dataSource.sort=this.sort}ngOnInit(){this.dataSource=new d.by(this._teams)}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(v.gz))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-index-page"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(g,5),2&n){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o.sort=r.first)}},decls:32,vars:3,consts:[["routerLink","create"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","fieldName"],["matColumnDef","subFieldName"],["matColumnDef","ageRangeName"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","players"],["matColumnDef","action"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-flat-button","","routerLink","create","fxLayoutAlign","center","aria-label","Add new",1,"mat-elevation-z8"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",3,"routerLink"],[1,"mat-row"],["colspan","7",1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"a",0),e.\u0275\u0275text(1,"\u0627\u0641\u0632\u0648\u062f\u0646"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"table",1),e.\u0275\u0275elementContainerStart(3,2),e.\u0275\u0275template(4,Q,2,0,"th",3),e.\u0275\u0275template(5,J,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(6,5),e.\u0275\u0275template(7,W,1,0,"th",3),e.\u0275\u0275template(8,Z,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(9,6),e.\u0275\u0275template(10,K,2,0,"th",3),e.\u0275\u0275template(11,q,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(12,7),e.\u0275\u0275template(13,ee,2,0,"th",3),e.\u0275\u0275template(14,te,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,8),e.\u0275\u0275template(16,ne,2,0,"th",9),e.\u0275\u0275template(17,ae,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(18,10),e.\u0275\u0275template(19,ie,2,0,"th",9),e.\u0275\u0275template(20,oe,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(21,11),e.\u0275\u0275template(22,re,1,0,"th",9),e.\u0275\u0275template(23,se,4,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(24,le,3,0,"tr",12),e.\u0275\u0275template(25,me,1,0,"tr",13),e.\u0275\u0275template(26,de,1,0,"tr",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"a",15)(28,"mat-icon"),e.\u0275\u0275text(29,"add"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"span"),e.\u0275\u0275text(31,"\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(23),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns))},dependencies:[T.zs,T.RK,X.Wh,F.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,d.Ee,v.rH],styles:["@media (min-width: 960){table[_ngcontent-%COMP%]{width:55%}}table[_ngcontent-%COMP%]{width:100%}"]}),t})();var c=s(4006),w=(()=>{return(t=w||(w={}))[t.woman=0]="woman",t[t.man=1]="man",t[t.other=2]="other",w;var t})(),x=(()=>{return(t=x||(x={}))[t.Bozorgsal=1]="Bozorgsal",t[t.Nojavan=2]="Nojavan",t[t.Nonahal=3]="Nonahal",x;var t})();const E={label:"\u0628\u0632\u0631\u06af\u0633\u0627\u0644\u0627\u0646",value:x.Bozorgsal},V={label:"\u0646\u0648\u062c\u0648\u0627\u0646\u0627\u0646",value:x.Nojavan},$={label:"\u0646\u0648\u0646\u0647\u0627\u0644\u0627\u0646",value:x.Nonahal};var C=(()=>{return(t=C||(C={}))[t.Football=1]="Football",t[t.Volleyball=2]="Volleyball",t[t.BasketBall=3]="BasketBall",t[t.Badminton=4]="Badminton",t[t.PingPong=5]="PingPong",t[t.Chess=6]="Chess",t[t.Swimming=7]="Swimming",t[t.Running=9]="Running",t[t.Cycliste=8]="Cycliste",C;var t})(),S=(()=>{return(t=S||(S={}))[t.Normal=1]="Normal",t[t.Double=2]="Double",t[t.X3=3]="X3",t[t.MixDouble=4]="MixDouble",t[t.Blitze=5]="Blitze",t[t.Speed=6]="Speed",t[t.X4=7]="X4",t[t.Endurance=8]="Endurance",t[t.Matranj=9]="Matranj",S;var t})(),ue=s(6842),he=s(2340),pe=s(4850);let M=(()=>{class t extends ue.x{constructor(){super(),this._url=he.N.url+"/api/v1/account/jam/team"}get teams(){return this.http.get(this._url).pipe((0,pe.U)(n=>n.data))}team(n){return this.http.get(this._url+`/${n}`)}create(n){return this.http.post(this._url,n)}addMember(n,o){return this.http.post(this._url+`/${n}/add-player`,o)}delete(n){return this.http.delete(this._url+`/${n}`)}deletePlayer(n,o){return this.http.delete(this._url+`/${n}/${o}`)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=s(599),z=s(6895),fe=s(4144),G=s(9549),ge=s(4385),ve=s(3472),U=s(1956);function _e(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-option",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.label," ")}}function Ce(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-option",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",n.label," ")}}let Se=(()=>{class t{constructor(n,o,r){this._teamRepository=n,this._swalService=o,this.teamconst={label:"\u062a\u06cc\u0645\u06cc",value:S.Normal},this.accessAbleSubFields=[],this.accessAbleAgeRange=[],this.fGroup=r.nonNullable.group({name:r.nonNullable.control("",[c.kI.required]),field:r.nonNullable.control(C.Football,[c.kI.required]),subField:r.nonNullable.control(S.Normal,[c.kI.required]),gender:r.nonNullable.control(null,[c.kI.required]),coach:r.nonNullable.control("",[c.kI.required]),ageRange:r.nonNullable.control(null,[c.kI.required])}),this.fGroup.controls.gender.valueChanges.subscribe(u=>{this.detecetsubFields(u),this.detecetAgeRange(u)}),this.fGroup.controls.field.valueChanges.subscribe(u=>{this.detecetsubFields(void 0,u),this.detecetAgeRange(void 0,u)}),this.fGroup.controls.subField.valueChanges.subscribe(u=>{this.detecetAgeRange(void 0,void 0,u)})}detecetAgeRange(n=this.fGroup.value.gender,o=this.fGroup.value.field,r=this.fGroup.value.subField){o==C.BasketBall?this.accessAbleAgeRange=r==S.X3&&n==w.man?[V,$]:[E]:o==C.Football?this.accessAbleAgeRange=n==w.woman?[E]:[E,V,$]:o==C.Volleyball&&(this.accessAbleAgeRange=[E]),this.fGroup.controls.ageRange.setValue(null)}detecetsubFields(n=this.fGroup.value.gender,o=this.fGroup.value.field){let r=[this.teamconst];o==C.BasketBall&&n==w.man&&(r=[...r,{label:"\u0633\u0647 \u0646\u0641\u0631\u0647",value:S.X3}]),this.accessAbleSubFields.length!=r.length&&this.fGroup.controls.subField.setValue(null),this.accessAbleSubFields=r}onSubmit(){const n=this.fGroup.value;this._teamRepository.create({name:n.name??"",ageRange:n.ageRange??null,field:n.field??null,subField:n.subField??null,coach:n.coach??"",gender:n.gender??null}).subscribe(o=>{this._swalService.successFullRegister()})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(M),e.\u0275\u0275directiveInject(k.J),e.\u0275\u0275directiveInject(c.qu))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-create-team-page"]],decls:38,vars:4,consts:[[1,"flex","md:grid","md:grid-cols-2","flex-col","gap-4","flex-wrap",3,"formGroup","submit"],["formControlName","name","matInput",""],["formControlName","field"],["value","1"],["value","2"],["value","3"],["formControlName","gender"],["value","0"],["formControlName","subField"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ageRange"],["formControlName","coach",3,"profileMode"],["mat-raised-button","","color","accent","type","submit",1,"w-full"],[1,"w-full"],[3,"value"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("submit",function(){return o.onSubmit()}),e.\u0275\u0275elementStart(1,"mat-form-field")(2,"mat-label"),e.\u0275\u0275text(3," \u0646\u0627\u0645 \u062a\u06cc\u0645 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-form-field")(6,"mat-label"),e.\u0275\u0275text(7," \u0648\u0631\u0632\u0634 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-select",2)(9,"mat-option",3),e.\u0275\u0275text(10,"\u0641\u0648\u062a\u0628\u0627\u0644"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-option",4),e.\u0275\u0275text(12,"\u0648\u0627\u0644\u06cc\u0628\u0627\u0644"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-option",5),e.\u0275\u0275text(14,"\u0628\u0633\u06a9\u062a\u0628\u0627\u0644"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"mat-form-field")(16,"mat-label"),e.\u0275\u0275text(17," \u062c\u0646\u0633\u06cc\u062a "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-select",6)(19,"mat-option",7),e.\u0275\u0275text(20,"\u0628\u0627\u0646\u0648\u0627\u0646"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"mat-option",3),e.\u0275\u0275text(22,"\u0622\u0642\u0627\u06cc\u0627\u0646"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"mat-form-field")(24,"mat-label"),e.\u0275\u0275text(25," \u0646\u0648\u0639 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-select",8),e.\u0275\u0275template(27,_e,2,2,"mat-option",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"mat-form-field")(29,"mat-label"),e.\u0275\u0275text(30," \u0631\u062f\u0647 \u0633\u0646\u06cc "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"mat-select",10),e.\u0275\u0275template(32,Ce,2,2,"mat-option",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"app-profile-check-input",11),e.\u0275\u0275text(34,"\u06a9\u062f \u0645\u0644\u06cc \u0645\u0631\u0628\u06cc"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"button",12),e.\u0275\u0275text(36,"\u062b\u0628\u062a \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"app-back-button",13),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275property("formGroup",o.fGroup),e.\u0275\u0275advance(27),e.\u0275\u0275property("ngForOf",o.accessAbleSubFields),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",o.accessAbleAgeRange),e.\u0275\u0275advance(1),e.\u0275\u0275property("profileMode",2))},dependencies:[z.NgForOf,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,fe.Nt,G.KE,G.hX,T.lW,ge.gD,l.ey,ve.W,U.p]}),t})();var be=s(5861),I=s(3546);function ye(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1," \u0646\u0627\u0645 "),e.\u0275\u0275elementEnd())}function Te(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.profile.name+" "+n.profile.family," ")}}function Ie(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1,"\u0646\u0642\u0634 "),e.\u0275\u0275elementEnd())}function De(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.playerTypeName," ")}}function Ae(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1," \u06a9\u062f \u0645\u0644\u06cc "),e.\u0275\u0275elementEnd())}function Ee(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.nationalCode," ")}}function Me(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," \u06af\u0631\u0648\u0647 \u0633\u0646\u06cc "),e.\u0275\u0275elementEnd())}function Pe(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.ageRangeName," ")}}function Re(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," \u062a\u0639\u062f\u0627\u062f \u0628\u0627\u0632\u06cc\u06a9\u0646 "),e.\u0275\u0275elementEnd())}function Ne(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.players," ")}}function Be(t,a){1&t&&e.\u0275\u0275element(0,"th",20)}function He(t,a){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext().$implicit,u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.onDeletePlayer(r.nationalCode))}),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2," delete"),e.\u0275\u0275elementEnd()()}}function Oe(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275template(1,He,3,0,"button",21),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==n.playerType)}}function je(t,a){1&t&&e.\u0275\u0275element(0,"tr",23)}function Fe(t,a){1&t&&e.\u0275\u0275element(0,"tr",24)}const Ve=[{path:"",component:ce,resolve:{teams:()=>(0,e.inject)(M).teams}},{path:"create",component:Se},{path:":id",component:(()=>{class t{constructor(n,o,r,u){this._teamService=r,this._swalService=u,this.displayedColumns=["name","playerType","nationalCode","action"],this.teamInfo=n.snapshot.data.team,this.dataSource=new d.by(this.teamInfo.players),this.fGroup=o.nonNullable.group({player:o.nonNullable.control("",[c.kI.required])})}onDeletePlayer(n){var o=this;return(0,be.Z)(function*(){const r=o.teamInfo.players.find(R=>R.nationalCode==n);(yield o._swalService.swal.fire({text:`\u0622\u06cc\u0627 \u0634\u0645\u0627 \u0645\u0637\u0645\u0639\u0646\u06cc\u062f \u0645\u06cc\u062e\u0648\u0627\u0647\u06cc\u062f \u0628\u0627\u0632\u06cc\u06a9\u0646 ${r.profile.name} ${r.profile.family} \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f.`,icon:"warning",confirmButtonText:"\u0628\u0644\u0647",showCancelButton:!0})).isConfirmed&&o._teamService.deletePlayer(o.teamInfo.team.id,n).subscribe(R=>{o._refreshTeam()})})()}_refreshTeam(){this._teamService.team(this.teamInfo.team.id).subscribe(n=>{this.teamInfo=n})}onNewPlayerAdded(){this._teamService.addMember(this.teamInfo.team.id,{team:this.teamInfo.team.id,nationalCode:this.fGroup.value.player}).subscribe(n=>{this.fGroup.reset(),this._refreshTeam()})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(c.qu),e.\u0275\u0275directiveInject(M),e.\u0275\u0275directiveInject(k.J))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-show-team-page"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(g,5),2&n){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o.sort=r.first)}},decls:54,vars:9,consts:[[1,"flex","flex-col","gap-3","mx-3"],[1,"flex","flex-row","gap-1"],[3,"innerText"],[3,"formGroup","submit"],["formControlName","player",3,"profileMode"],["mat-raised-button","","color","accent",3,"disabled"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","playerType"],["matColumnDef","nationalCode"],["matColumnDef","ageRangeName"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","players"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-title"),e.\u0275\u0275text(3,"\u0645\u0634\u062e\u0635\u0627\u062a \u06a9\u0644\u06cc \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-card-content",1)(5,"p")(6,"span"),e.\u0275\u0275text(7,"\u0646\u0627\u0645: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"span",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"p")(10,"span"),e.\u0275\u0275text(11,"\u0631\u062f\u0647 \u0633\u0646\u06cc: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"span",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p")(14,"span"),e.\u0275\u0275text(15,"\u062c\u0646\u0633\u06cc\u062a: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"span",2),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"form",3),e.\u0275\u0275listener("submit",function(){return o.onNewPlayerAdded()}),e.\u0275\u0275elementStart(18,"mat-card")(19,"mat-card-title"),e.\u0275\u0275text(20,"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0627\u0632\u06cc\u06a9\u0646 \u062c\u062f\u06cc\u062f"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"mat-card-content")(22,"app-profile-check-input",4),e.\u0275\u0275text(23,"\u06a9\u062f \u0645\u0644\u06cc"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"mat-card-actions")(25,"button",5)(26,"mat-icon"),e.\u0275\u0275text(27,"save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(28," \u062b\u0628\u062a"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(29,"mat-card")(30,"mat-card-title"),e.\u0275\u0275text(31,"\u0627\u0639\u0636\u0627\u06cc \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"mat-card-content")(33,"table",6),e.\u0275\u0275elementContainerStart(34,7),e.\u0275\u0275template(35,ye,2,0,"th",8),e.\u0275\u0275template(36,Te,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(37,10),e.\u0275\u0275template(38,Ie,2,0,"th",8),e.\u0275\u0275template(39,De,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(40,11),e.\u0275\u0275template(41,Ae,2,0,"th",8),e.\u0275\u0275template(42,Ee,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(43,12),e.\u0275\u0275template(44,Me,2,0,"th",13),e.\u0275\u0275template(45,Pe,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(46,14),e.\u0275\u0275template(47,Re,2,0,"th",13),e.\u0275\u0275template(48,Ne,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(49,15),e.\u0275\u0275template(50,Be,1,0,"th",13),e.\u0275\u0275template(51,Oe,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(52,je,1,0,"tr",16),e.\u0275\u0275template(53,Fe,1,0,"tr",17),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("innerText",o.teamInfo.team.name),e.\u0275\u0275advance(4),e.\u0275\u0275property("innerText",o.teamInfo.team.ageRangeName),e.\u0275\u0275advance(4),e.\u0275\u0275property("innerText",o.teamInfo.team.genderName),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",o.fGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("profileMode",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",o.fGroup.invalid),e.\u0275\u0275advance(8),e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(19),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns))},dependencies:[z.NgIf,c._Y,c.JJ,c.JL,c.sg,c.u,T.lW,T.RK,F.Hw,U.p,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,I.a8,I.hq,I.dn,I.n5]}),t})(),resolve:{team:t=>{const a=t.params.id;return(0,e.inject)(M).team(a)}}}];let $e=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[v.Bz.forChild(Ve),v.Bz]}),t})();var ke=s(35);let ze=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[ke._,$e,I.QW]}),t})()},4044:(L,D,s)=>{s.d(D,{$:()=>j});var v=s(4006),d=s(7641),e=s(8924),b=s(2340),l=s(4650),A=s(1305),i=s(529);let N=(()=>{class h{constructor(m){this._httpClient=m,this._url=b.N.url+"/api/v1/files/upload"}uploadFile(m,f,g,_){const p=new FormData;return p.append("file",m),p.append("fileType",f),p.append("eventType",g),p.append("nationalCode",_),this._httpClient.post(this._url,p)}}return h.\u0275fac=function(m){return new(m||h)(l.\u0275\u0275inject(i.eN))},h.\u0275prov=l.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();var B=s(867),H=s(9078);const O=["*"];let j=(()=>{class h{constructor(m,f,g){this._lightbox=m,this._uploadService=f,this._authSerivce=g,this.maxSize=100,this.nationalCode=this._authSerivce.getTokenItem("nationalCode"),this.isUploading=!1,this.onChange=_=>{},this.onTouched=()=>{},this.touched=!1,this.disabled=!1}writeValue(m){(0,d.Z)(m)||(this.src=b.N.url+"/api/v1/files/show/"+m)}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}validate(m){return m.hasValidator(v.kI.required)&&(0,e.Z)(this.src)?{required:!0}:null}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}setDisabledState(m){this.disabled=m}ngOnChanges(m){this.src=b.N.url+"/api/v1/files/show/"+this.lastImageid}onSelectedFile(m){this.markAsTouched();const f=m.target.files[0];this.isUploading=!0,this._uploadService.uploadFile(f,this.fileType,this.eventType,this.nationalCode).subscribe(g=>{this.onChange(g.entity.fileId),this.isUploading=!1,this.src=g.entity.filePath},()=>{this.isUploading=!1})}onOpenImage(m){this._lightbox.open([{src:m.target.src,thumb:""}])}}return h.\u0275fac=function(m){return new(m||h)(l.\u0275\u0275directiveInject(A.ey),l.\u0275\u0275directiveInject(N),l.\u0275\u0275directiveInject(B.$))},h.\u0275cmp=l.\u0275\u0275defineComponent({type:h,selectors:[["app-image-uploader"]],inputs:{maxSize:"maxSize",accept:"accept",lastImageid:"lastImageid",fileType:"fileType",eventType:"eventType",nationalCode:"nationalCode"},features:[l.\u0275\u0275ProvidersFeature([{provide:v.JU,multi:!0,useExisting:h},{provide:v.Cf,multi:!0,useExisting:h}]),l.\u0275\u0275NgOnChangesFeature],ngContentSelectors:O,decls:5,vars:3,consts:[[1,"upload-btn-wrapper",3,"largeLoading"],["type","file","name","myfile",3,"accept","change"],["onError","this.src= 'https://file.behroozbc.ir/no_logo.png'","alt","",3,"src","click"]],template:function(m,f){1&m&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275elementStart(0,"div",0)(1,"label"),l.\u0275\u0275projection(2),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"input",1),l.\u0275\u0275listener("change",function(_){return f.onSelectedFile(_)}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(4,"img",2),l.\u0275\u0275listener("click",function(_){return f.onOpenImage(_)}),l.\u0275\u0275elementEnd()),2&m&&(l.\u0275\u0275property("largeLoading",f.isUploading),l.\u0275\u0275advance(3),l.\u0275\u0275property("accept",f.accept),l.\u0275\u0275advance(1),l.\u0275\u0275property("src",f.src,l.\u0275\u0275sanitizeUrl))},dependencies:[H.M],styles:["img[_ngcontent-%COMP%]{display:inline;max-width:3rem;float:left}div[_ngcontent-%COMP%]{display:inline}"]}),h})()}}]);