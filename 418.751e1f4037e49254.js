"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[418],{7418:(j,l,a)=>{a.r(l),a.d(l,{DormitoryModule:()=>B});var d=a(6630),u=a(2143),s=a(1441),t=a(4650),m=a(4006),C=a(2340),h=a(529);let c=(()=>{class o{constructor(e){this._http=e,this._url=C.N.url+"/api/v1/account/jam/dormitory"}get dorms(){return this._http.get(this._url)}register(e){return this._http.post(this._url,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=a(9549),g=a(4859),y=a(4385),x=a(3238),i=a(3546);function Z(o,n){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0646\u0627\u0645 "),t.qZA())}function v(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.profile.name+" "+e.profile.family," ")}}function T(o,n){1&o&&t._UZ(0,"th",14)}function D(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.hij(" ",e+1," ")}}function I(o,n){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0634\u0645\u0627\u0631\u0647 \u067e\u06cc\u06af\u06cc\u0631\u06cc"),t.qZA())}function A(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;let r;t.xp6(1),t.hij(" ",null!==(r=null==e.dormitory?null:e.dormitory.refId)&&void 0!==r?r:"-"," ")}}function R(o,n){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0647\u0632\u06cc\u0646\u0647"),t.qZA())}function _(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e.dormitory?null:e.dormitory.refId," ")}}function N(o,n){1&o&&(t.TgZ(0,"th",16),t._uU(1,"\u0633\u0628\u06a9 \u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA())}function P(o,n){if(1&o&&(t.TgZ(0,"td",15)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"\u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA(),t.TgZ(4,"mat-select",17)(5,"mat-option",18),t._uU(6,"\u0628\u06cc \u063a\u0630\u0627"),t.qZA(),t.TgZ(7,"mat-option",18),t._uU(8,"\u0646\u0627\u0647\u0627\u0631"),t.qZA(),t.TgZ(9,"mat-option",18),t._uU(10,"\u0646\u0627\u0647\u0627\u0631 \u0648 \u0634\u0627\u0645"),t.qZA()()()()),2&o){const e=n.$implicit;t.xp6(4),t.Q6J("formControlName",e.profile.nationalCode),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3)}}function U(o,n){1&o&&t._UZ(0,"tr",19)}function Y(o,n){1&o&&t._UZ(0,"tr",20)}const Q=[{path:"",component:(()=>{class o{constructor(e,r,p){this._fb=r,this._dormRepository=p,this.displayedColumns=["index","name","action","refId"],this.dorms=e.snapshot.data.dorms,this.dataSource=new u.by(this.dorms),this.fRecord=r.record({})}ngOnInit(){for(const e of this.dorms){const r=this._fb.control(e.dormitory?.type);(0,s.Z)(e.dormitory?.authority)||r.disable(),this.fRecord.addControl(e.profile.nationalCode,r)}}onSubmit(){const e={dorms:this.dorms.filter(r=>(0,s.Z)(r.dormitory?.refId)).map(r=>({nationalCode:r.profile.nationalCode,type:this.fRecord.value[r.profile.nationalCode]}))};this._dormRepository.register(e).subscribe(r=>window.location.replace(r.action))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(m.qu),t.Y36(c))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-index-page"]],decls:26,vars:5,consts:[[3,"formGroup","submit"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","refId"],["matColumnDef","amount"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"formControlName"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-title"),t._uU(3,"\u062e\u0648\u0627\u0628\u06af\u0627\u0647"),t.qZA(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,Z,2,0,"th",3),t.YNc(8,v,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,T,1,0,"th",3),t.YNc(11,D,2,1,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,I,2,0,"th",3),t.YNc(14,A,2,1,"td",4),t.BQk(),t.ynx(15,7),t.YNc(16,R,2,0,"th",3),t.YNc(17,_,2,1,"td",4),t.BQk(),t.ynx(18,8),t.YNc(19,N,2,0,"th",9),t.YNc(20,P,11,4,"td",4),t.BQk(),t.YNc(21,U,1,0,"tr",10),t.YNc(22,Y,1,0,"tr",11),t.qZA()(),t.TgZ(23,"mat-card-actions",12)(24,"button",13),t._uU(25,"\u067e\u0631\u062f\u0627\u062e\u062a"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",r.fRecord),t.xp6(5),t.Q6J("dataSource",r.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(2),t.Q6J("disabled",r.fRecord.invalid))},dependencies:[m._Y,m.JJ,m.JL,m.sg,m.u,f.KE,f.hX,g.lW,y.gD,x.ey,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,i.a8,i.hq,i.dn,i.n5]}),o})(),resolve:{dorms:o=>(0,t.f3M)(c).dorms}}];let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),o})();var S=a(35);let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[S._,J,i.QW]}),o})()}}]);