"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[418],{7418:(H,u,r)=>{r.r(u),r.d(u,{DormitoryModule:()=>A});var i=r(458),m=r(671),s=r(1441),e=r(4650),l=r(4006),C=r(2340),h=r(529);let c=(()=>{class t{constructor(n){this._http=n,this._url=C.N.url+"/api/v1/account/jam/dormitory"}get dorms(){return this._http.get(this._url)}register(n){return this._http.post(this._url,n)}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275inject(h.eN))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=r(9549),y=r(4859),v=r(4385),x=r(3238),d=r(3546);function g(t,o){1&t&&(e.\u0275\u0275elementStart(0,"th",14),e.\u0275\u0275text(1," \u0646\u0627\u0645 "),e.\u0275\u0275elementEnd())}function I(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"td",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.profile.name+" "+n.profile.family," ")}}function S(t,o){1&t&&e.\u0275\u0275element(0,"th",14)}function D(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"td",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=o.index;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n+1," ")}}function E(t,o){1&t&&(e.\u0275\u0275elementStart(0,"th",14),e.\u0275\u0275text(1," \u0634\u0645\u0627\u0631\u0647 \u067e\u06cc\u06af\u06cc\u0631\u06cc"),e.\u0275\u0275elementEnd())}function R(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"td",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=o.$implicit;let a;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null!==(a=null==n.dormitory?null:n.dormitory.refId)&&void 0!==a?a:"-"," ")}}function P(t,o){1&t&&(e.\u0275\u0275elementStart(0,"th",14),e.\u0275\u0275text(1," \u0647\u0632\u06cc\u0646\u0647"),e.\u0275\u0275elementEnd())}function T(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"td",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null==n.dormitory?null:n.dormitory.refId," ")}}function j(t,o){1&t&&(e.\u0275\u0275elementStart(0,"th",16),e.\u0275\u0275text(1,"\u0633\u0628\u06a9 \u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),e.\u0275\u0275elementEnd())}function b(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"td",15)(1,"mat-form-field")(2,"mat-label"),e.\u0275\u0275text(3,"\u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",17)(5,"mat-option",18),e.\u0275\u0275text(6,"\u0628\u06cc \u063a\u0630\u0627"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-option",18),e.\u0275\u0275text(8,"\u0646\u0627\u0647\u0627\u0631"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-option",18),e.\u0275\u0275text(10,"\u0646\u0627\u0647\u0627\u0631 \u0648 \u0634\u0627\u0645"),e.\u0275\u0275elementEnd()()()()),2&t){const n=o.$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275property("formControlName",n.profile.nationalCode),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",2),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",3)}}function M(t,o){1&t&&e.\u0275\u0275element(0,"tr",19)}function F(t,o){1&t&&e.\u0275\u0275element(0,"tr",20)}const N=[{path:"",component:(()=>{class t{constructor(n,a,f){this._fb=a,this._dormRepository=f,this.displayedColumns=["index","name","action","refId"],this.dorms=n.snapshot.data.dorms,this.dataSource=new m.by(this.dorms),this.fRecord=a.record({})}ngOnInit(){for(const n of this.dorms){const a=this._fb.control(n.dormitory?.type);(0,s.Z)(n.dormitory?.authority)||a.disable(),this.fRecord.addControl(n.profile.nationalCode,a)}}onSubmit(){const n={dorms:this.dorms.filter(a=>(0,s.Z)(a.dormitory?.refId)).map(a=>({nationalCode:a.profile.nationalCode,type:this.fRecord.value[a.profile.nationalCode]}))};this._dormRepository.register(n).subscribe(a=>window.location.replace(a.action))}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(i.gz),e.\u0275\u0275directiveInject(l.qu),e.\u0275\u0275directiveInject(c))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-index-page"]],decls:26,vars:5,consts:[[3,"formGroup","submit"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","refId"],["matColumnDef","amount"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"formControlName"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("submit",function(){return a.onSubmit()}),e.\u0275\u0275elementStart(1,"mat-card")(2,"mat-card-title"),e.\u0275\u0275text(3,"\u062e\u0648\u0627\u0628\u06af\u0627\u0647"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-card-content")(5,"table",1),e.\u0275\u0275elementContainerStart(6,2),e.\u0275\u0275template(7,g,2,0,"th",3),e.\u0275\u0275template(8,I,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(9,5),e.\u0275\u0275template(10,S,1,0,"th",3),e.\u0275\u0275template(11,D,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(12,6),e.\u0275\u0275template(13,E,2,0,"th",3),e.\u0275\u0275template(14,R,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(15,7),e.\u0275\u0275template(16,P,2,0,"th",3),e.\u0275\u0275template(17,T,2,1,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(18,8),e.\u0275\u0275template(19,j,2,0,"th",9),e.\u0275\u0275template(20,b,11,4,"td",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(21,M,1,0,"tr",10),e.\u0275\u0275template(22,F,1,0,"tr",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"mat-card-actions",12)(24,"button",13),e.\u0275\u0275text(25,"\u067e\u0631\u062f\u0627\u062e\u062a"),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275property("formGroup",a.fRecord),e.\u0275\u0275advance(5),e.\u0275\u0275property("dataSource",a.dataSource),e.\u0275\u0275advance(16),e.\u0275\u0275property("matHeaderRowDef",a.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",a.displayedColumns),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",a.fRecord.invalid))},dependencies:[l._Y,l.JJ,l.JL,l.sg,l.u,p.KE,p.hX,y.lW,v.gD,x.ey,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.a8,d.hq,d.dn,d.n5]}),t})(),resolve:{dorms:t=>(0,e.inject)(c).dorms}}];let z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[i.Bz.forChild(N),i.Bz]}),t})();var w=r(35);let A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[w._,z,d.QW]}),t})()}}]);