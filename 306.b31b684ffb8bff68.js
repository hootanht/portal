"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[306],{5557:(Q,D,s)=>{s.r(D),s.d(D,{TeamModule:()=>Ge});var g=s(458),d=s(671),e=s(4650),y=s(1281),l=s(3238),A=s(8929);s(7340);const P=new e.InjectionToken("MAT_SORT_DEFAULT_OPTIONS"),h=(0,l.dB)((0,l.Id)(class{}));let _=(()=>{class t extends h{get direction(){return this._direction}set direction(n){this._direction=n}get disableClear(){return this._disableClear}set disableClear(n){this._disableClear=(0,y.Ig)(n)}constructor(n){super(),this._defaultOptions=n,this.sortables=new Map,this._stateChanges=new A.xQ,this.start="asc",this._direction="",this.sortChange=new e.EventEmitter}register(n){this.sortables.set(n.id,n)}deregister(n){this.sortables.delete(n.id)}sort(n){this.active!=n.id?(this.active=n.id,this.direction=n.start?n.start:this.start):this.direction=this.getNextSortDirection(n),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(n){if(!n)return"";let r=function m(t,a){let n=["asc","desc"];return"desc"==t&&n.reverse(),a||n.push(""),n}(n.start||this.start,n?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),p=r.indexOf(this.direction)+1;return p>=r.length&&(p=0),r[p]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(P,8))},t.\u0275dir=e.\u0275\u0275defineDirective({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature]}),t})();var T=s(4859),J=s(1576),$=s(7392);function W(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",15),e.\u0275\u0275text(1," \u0646\u0627\u0645 "),e.\u0275\u0275elementEnd())}function Z(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," ")}}function K(t,a){1&t&&e.\u0275\u0275element(0,"th",15)}function q(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.index;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n+1," ")}}function ee(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",15),e.\u0275\u0275text(1," \u0631\u0634\u062a\u0647 "),e.\u0275\u0275elementEnd())}function te(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.fieldName," ")}}function ne(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",15),e.\u0275\u0275text(1," \u0631\u062f\u0647 "),e.\u0275\u0275elementEnd())}function ae(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.subFieldName," ")}}function ie(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",17),e.\u0275\u0275text(1," \u06af\u0631\u0648\u0647 \u0633\u0646\u06cc "),e.\u0275\u0275elementEnd())}function oe(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.ageRangeName," ")}}function re(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",17),e.\u0275\u0275text(1," \u062a\u0639\u062f\u0627\u062f \u0628\u0627\u0632\u06cc\u06a9\u0646 "),e.\u0275\u0275elementEnd())}function se(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.players," ")}}function le(t,a){1&t&&e.\u0275\u0275element(0,"th",17)}function me(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",16)(1,"button",18)(2,"mat-icon"),e.\u0275\u0275text(3," visibility"),e.\u0275\u0275elementEnd()()()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",n.id)}}function de(t,a){1&t&&(e.\u0275\u0275elementStart(0,"tr",19)(1,"td",20),e.\u0275\u0275text(2,"\u062a\u06cc\u0645\u06cc \u0628\u0647 \u0633\u0631\u067e\u0631\u0633\u062a\u06cc \u0634\u0645\u0627 \u062a\u0639\u0631\u06cc\u0641 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a."),e.\u0275\u0275elementEnd()())}function ce(t,a){1&t&&e.\u0275\u0275element(0,"tr",21)}function ue(t,a){1&t&&e.\u0275\u0275element(0,"tr",22)}let he=(()=>{class t{constructor(n){this._activatedRoute=n,this.displayedColumns=["index","name","fieldName","subFieldName","ageRangeName","players","action"],this._teams=n.snapshot.data.teams}ngAfterViewInit(){this.dataSource.sort=this.sort}ngOnInit(){this.dataSource=new d.by(this._teams)}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(g.gz))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-index-page"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(_,5),2&n){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o.sort=r.first)}},decls:30,vars:3,consts:[["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","fieldName"],["matColumnDef","subFieldName"],["matColumnDef","ageRangeName"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","players"],["matColumnDef","action"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-flat-button","","routerLink","create","fxLayoutAlign","center","aria-label","Add new",1,"mat-elevation-z8"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",3,"routerLink"],[1,"mat-row"],["colspan","7",1,"mat-cell"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"table",0),e.\u0275\u0275elementContainerStart(1,1),e.\u0275\u0275template(2,W,2,0,"th",2),e.\u0275\u0275template(3,Z,2,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(4,4),e.\u0275\u0275template(5,K,1,0,"th",2),e.\u0275\u0275template(6,q,2,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(7,5),e.\u0275\u0275template(8,ee,2,0,"th",2),e.\u0275\u0275template(9,te,2,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(10,6),e.\u0275\u0275template(11,ne,2,0,"th",2),e.\u0275\u0275template(12,ae,2,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,7),e.\u0275\u0275template(14,ie,2,0,"th",8),e.\u0275\u0275template(15,oe,2,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,9),e.\u0275\u0275template(17,re,2,0,"th",8),e.\u0275\u0275template(18,se,2,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,10),e.\u0275\u0275template(20,le,1,0,"th",8),e.\u0275\u0275template(21,me,4,1,"td",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(22,de,3,0,"tr",11),e.\u0275\u0275template(23,ce,1,0,"tr",12),e.\u0275\u0275template(24,ue,1,0,"tr",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"a",14)(26,"mat-icon"),e.\u0275\u0275text(27,"add"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"span"),e.\u0275\u0275text(29,"\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(23),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns))},dependencies:[T.zs,T.RK,J.Wh,$.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,d.Ee,g.rH],styles:["@media (min-width: 960){table[_ngcontent-%COMP%]{width:55%}}table[_ngcontent-%COMP%]{width:100%}"]}),t})();var u=s(4006),x=(()=>{return(t=x||(x={}))[t.woman=0]="woman",t[t.man=1]="man",t[t.other=2]="other",x;var t})(),b=(()=>{return(t=b||(b={}))[t.Bozorgsal=1]="Bozorgsal",t[t.Nojavan=2]="Nojavan",t[t.Nonahal=3]="Nonahal",b;var t})();const E={label:"\u0628\u0632\u0631\u06af\u0633\u0627\u0644\u0627\u0646",value:b.Bozorgsal},k={label:"\u0646\u0648\u062c\u0648\u0627\u0646\u0627\u0646",value:b.Nojavan},z={label:"\u0646\u0648\u0646\u0647\u0627\u0644\u0627\u0646",value:b.Nonahal};var S=(()=>{return(t=S||(S={}))[t.Football=1]="Football",t[t.Volleyball=2]="Volleyball",t[t.BasketBall=3]="BasketBall",t[t.Badminton=4]="Badminton",t[t.PingPong=5]="PingPong",t[t.Chess=6]="Chess",t[t.Swimming=7]="Swimming",t[t.Running=9]="Running",t[t.Cycliste=8]="Cycliste",S;var t})(),w=(()=>{return(t=w||(w={}))[t.Normal=1]="Normal",t[t.Double=2]="Double",t[t.X3=3]="X3",t[t.MixDouble=4]="MixDouble",t[t.Blitze=5]="Blitze",t[t.Speed=6]="Speed",t[t.X4=7]="X4",t[t.Endurance=8]="Endurance",t[t.Matranj=9]="Matranj",w;var t})(),pe=s(6842),fe=s(2340),ge=s(4850);let M=(()=>{class t extends pe.x{constructor(){super(),this._url=fe.N.url+"/api/v1/account/jam/team"}get teams(){return this.http.get(this._url).pipe((0,ge.U)(n=>n.data))}team(n){return this.http.get(this._url+`/${n}`)}create(n){return this.http.post(this._url,n)}addMember(n,o){return this.http.post(this._url+`/${n}/add-player`,o)}delete(n){return this.http.delete(this._url+`/${n}`)}deletePlayer(n,o){return this.http.delete(this._url+`/${n}/${o}`)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var G=s(599),U=s(6895),ve=s(4144),L=s(9549),_e=s(4385),Y=s(3472),X=s(1956);function Ce(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-option",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.label," ")}}function Se(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-option",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275property("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",n.label," ")}}let we=(()=>{class t{constructor(n,o,r){this._teamRepository=n,this._swalService=o,this.teamconst={label:"\u062a\u06cc\u0645\u06cc",value:w.Normal},this.accessAbleSubFields=[],this.accessAbleAgeRange=[],this.fGroup=r.nonNullable.group({name:r.nonNullable.control("",[u.kI.required]),field:r.nonNullable.control(S.Football,[u.kI.required]),subField:r.nonNullable.control(w.Normal,[u.kI.required]),gender:r.nonNullable.control(null,[u.kI.required]),coach:r.nonNullable.control("",[u.kI.required]),ageRange:r.nonNullable.control(null,[u.kI.required])}),this.fGroup.controls.gender.valueChanges.subscribe(p=>{this.detecetsubFields(p),this.detecetAgeRange(p)}),this.fGroup.controls.field.valueChanges.subscribe(p=>{this.detecetsubFields(void 0,p),this.detecetAgeRange(void 0,p)}),this.fGroup.controls.subField.valueChanges.subscribe(p=>{this.detecetAgeRange(void 0,void 0,p)})}detecetAgeRange(n=this.fGroup.value.gender,o=this.fGroup.value.field,r=this.fGroup.value.subField){o==S.BasketBall?this.accessAbleAgeRange=r==w.X3&&n==x.man?[k,z]:[E]:o==S.Football?this.accessAbleAgeRange=n==x.woman?[E]:[E,k,z]:o==S.Volleyball&&(this.accessAbleAgeRange=[E]),this.fGroup.controls.ageRange.setValue(null)}detecetsubFields(n=this.fGroup.value.gender,o=this.fGroup.value.field){let r=[this.teamconst];o==S.BasketBall&&n==x.man&&(r=[...r,{label:"\u0633\u0647 \u0646\u0641\u0631\u0647",value:w.X3}]),this.accessAbleSubFields.length!=r.length&&this.fGroup.controls.subField.setValue(null),this.accessAbleSubFields=r}onSubmit(){const n=this.fGroup.value;this._teamRepository.create({name:n.name??"",ageRange:n.ageRange??null,field:n.field??null,subField:n.subField??null,coach:n.coach??"",gender:n.gender??null}).subscribe(o=>{this._swalService.successFullRegister(),this.fGroup.reset()})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(M),e.\u0275\u0275directiveInject(G.J),e.\u0275\u0275directiveInject(u.qu))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-create-team-page"]],decls:38,vars:4,consts:[[1,"flex","md:grid","md:grid-cols-2","flex-col","gap-4","flex-wrap",3,"formGroup","submit"],["formControlName","name","matInput",""],["formControlName","field"],["value","1"],["value","2"],["value","3"],["formControlName","gender"],["value","0"],["formControlName","subField"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ageRange"],["formControlName","coach",3,"profileMode"],["mat-raised-button","","color","accent","type","submit",1,"w-full"],[1,"w-full"],[3,"value"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("submit",function(){return o.onSubmit()}),e.\u0275\u0275elementStart(1,"mat-form-field")(2,"mat-label"),e.\u0275\u0275text(3," \u0646\u0627\u0645 \u062a\u06cc\u0645 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-form-field")(6,"mat-label"),e.\u0275\u0275text(7," \u0648\u0631\u0632\u0634 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-select",2)(9,"mat-option",3),e.\u0275\u0275text(10,"\u0641\u0648\u062a\u0628\u0627\u0644"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-option",4),e.\u0275\u0275text(12,"\u0648\u0627\u0644\u06cc\u0628\u0627\u0644"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-option",5),e.\u0275\u0275text(14,"\u0628\u0633\u06a9\u062a\u0628\u0627\u0644"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"mat-form-field")(16,"mat-label"),e.\u0275\u0275text(17," \u062c\u0646\u0633\u06cc\u062a "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-select",6)(19,"mat-option",7),e.\u0275\u0275text(20,"\u0628\u0627\u0646\u0648\u0627\u0646"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"mat-option",3),e.\u0275\u0275text(22,"\u0622\u0642\u0627\u06cc\u0627\u0646"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"mat-form-field")(24,"mat-label"),e.\u0275\u0275text(25," \u0646\u0648\u0639 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-select",8),e.\u0275\u0275template(27,Ce,2,2,"mat-option",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"mat-form-field")(29,"mat-label"),e.\u0275\u0275text(30," \u0631\u062f\u0647 \u0633\u0646\u06cc "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"mat-select",10),e.\u0275\u0275template(32,Se,2,2,"mat-option",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"app-profile-check-input",11),e.\u0275\u0275text(34,"\u06a9\u062f \u0645\u0644\u06cc \u0645\u0631\u0628\u06cc"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"button",12),e.\u0275\u0275text(36,"\u062b\u0628\u062a \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"app-back-button",13),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275property("formGroup",o.fGroup),e.\u0275\u0275advance(27),e.\u0275\u0275property("ngForOf",o.accessAbleSubFields),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",o.accessAbleAgeRange),e.\u0275\u0275advance(1),e.\u0275\u0275property("profileMode",2))},dependencies:[U.NgForOf,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,ve.Nt,L.KE,L.hX,T.lW,_e.gD,l.ey,Y.W,X.p]}),t})();var ye=s(5861),I=s(3546);function Te(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1," \u0646\u0627\u0645 "),e.\u0275\u0275elementEnd())}function Ie(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.profile.name+" "+n.profile.family," ")}}function De(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1,"\u0646\u0642\u0634 "),e.\u0275\u0275elementEnd())}function Ae(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.playerTypeName," ")}}function Ee(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",18),e.\u0275\u0275text(1," \u06a9\u062f \u0645\u0644\u06cc "),e.\u0275\u0275elementEnd())}function Me(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.nationalCode," ")}}function Pe(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," \u06af\u0631\u0648\u0647 \u0633\u0646\u06cc "),e.\u0275\u0275elementEnd())}function Re(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.ageRangeName," ")}}function Ne(t,a){1&t&&(e.\u0275\u0275elementStart(0,"th",20),e.\u0275\u0275text(1," \u062a\u0639\u062f\u0627\u062f \u0628\u0627\u0632\u06cc\u06a9\u0646 "),e.\u0275\u0275elementEnd())}function Be(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.players," ")}}function He(t,a){1&t&&e.\u0275\u0275element(0,"th",20)}function Oe(t,a){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext().$implicit,p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onDeletePlayer(r.nationalCode))}),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2," delete"),e.\u0275\u0275elementEnd()()}}function je(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"td",19),e.\u0275\u0275template(1,Oe,3,0,"button",21),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1==n.playerType)}}function Fe(t,a){1&t&&e.\u0275\u0275element(0,"tr",23)}function Ve(t,a){1&t&&e.\u0275\u0275element(0,"tr",24)}const $e=[{path:"",component:he,resolve:{teams:()=>(0,e.inject)(M).teams}},{path:"create",component:we},{path:":id",component:(()=>{class t{constructor(n,o,r,p){this._teamService=r,this._swalService=p,this.displayedColumns=["name","playerType","nationalCode","action"],this.teamInfo=n.snapshot.data.team,this.dataSource=new d.by(this.teamInfo.players),this.fGroup=o.nonNullable.group({player:o.nonNullable.control("",[u.kI.required])})}onDeletePlayer(n){var o=this;return(0,ye.Z)(function*(){const r=o.teamInfo.players.find(R=>R.nationalCode==n);(yield o._swalService.swal.fire({text:`\u0622\u06cc\u0627 \u0634\u0645\u0627 \u0645\u0637\u0645\u0639\u0646\u06cc\u062f \u0645\u06cc\u062e\u0648\u0627\u0647\u06cc\u062f \u0628\u0627\u0632\u06cc\u06a9\u0646 ${r.profile.name} ${r.profile.family} \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f.`,icon:"warning",confirmButtonText:"\u0628\u0644\u0647",showCancelButton:!0})).isConfirmed&&o._teamService.deletePlayer(o.teamInfo.team.id,n).subscribe(R=>{o._refreshTeam()})})()}_refreshTeam(){this._teamService.team(this.teamInfo.team.id).subscribe(n=>{this.teamInfo=n})}onNewPlayerAdded(){this._teamService.addMember(this.teamInfo.team.id,{team:this.teamInfo.team.id,nationalCode:this.fGroup.value.player}).subscribe(n=>{this.fGroup.reset(),this._refreshTeam()})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(g.gz),e.\u0275\u0275directiveInject(u.qu),e.\u0275\u0275directiveInject(M),e.\u0275\u0275directiveInject(G.J))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-show-team-page"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(_,5),2&n){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(o.sort=r.first)}},decls:55,vars:9,consts:[[1,"flex","flex-col","gap-3","mx-3"],[1,"flex","flex-row","gap-1"],[3,"innerText"],[3,"formGroup","submit"],["formControlName","player",3,"profileMode"],["mat-raised-button","","color","accent",3,"disabled"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","playerType"],["matColumnDef","nationalCode"],["matColumnDef","ageRangeName"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","players"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-card")(2,"mat-card-title"),e.\u0275\u0275text(3,"\u0645\u0634\u062e\u0635\u0627\u062a \u06a9\u0644\u06cc \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-card-content",1)(5,"p")(6,"span"),e.\u0275\u0275text(7,"\u0646\u0627\u0645: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"span",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"p")(10,"span"),e.\u0275\u0275text(11,"\u0631\u062f\u0647 \u0633\u0646\u06cc: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"span",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p")(14,"span"),e.\u0275\u0275text(15,"\u062c\u0646\u0633\u06cc\u062a: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"span",2),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"form",3),e.\u0275\u0275listener("submit",function(){return o.onNewPlayerAdded()}),e.\u0275\u0275elementStart(18,"mat-card")(19,"mat-card-title"),e.\u0275\u0275text(20,"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0627\u0632\u06cc\u06a9\u0646 \u062c\u062f\u06cc\u062f"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"mat-card-content")(22,"app-profile-check-input",4),e.\u0275\u0275text(23,"\u06a9\u062f \u0645\u0644\u06cc"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"mat-card-actions")(25,"button",5)(26,"mat-icon"),e.\u0275\u0275text(27,"save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(28," \u062b\u0628\u062a"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(29,"mat-card")(30,"mat-card-title"),e.\u0275\u0275text(31,"\u0627\u0639\u0636\u0627\u06cc \u062a\u06cc\u0645"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"mat-card-content")(33,"table",6),e.\u0275\u0275elementContainerStart(34,7),e.\u0275\u0275template(35,Te,2,0,"th",8),e.\u0275\u0275template(36,Ie,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(37,10),e.\u0275\u0275template(38,De,2,0,"th",8),e.\u0275\u0275template(39,Ae,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(40,11),e.\u0275\u0275template(41,Ee,2,0,"th",8),e.\u0275\u0275template(42,Me,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(43,12),e.\u0275\u0275template(44,Pe,2,0,"th",13),e.\u0275\u0275template(45,Re,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(46,14),e.\u0275\u0275template(47,Ne,2,0,"th",13),e.\u0275\u0275template(48,Be,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(49,15),e.\u0275\u0275template(50,He,1,0,"th",13),e.\u0275\u0275template(51,je,2,1,"td",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(52,Fe,1,0,"tr",16),e.\u0275\u0275template(53,Ve,1,0,"tr",17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(54,"app-back-button"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("innerText",o.teamInfo.team.name),e.\u0275\u0275advance(4),e.\u0275\u0275property("innerText",o.teamInfo.team.ageRangeName),e.\u0275\u0275advance(4),e.\u0275\u0275property("innerText",o.teamInfo.team.genderName),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",o.fGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("profileMode",1),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",o.fGroup.invalid),e.\u0275\u0275advance(8),e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(19),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns))},dependencies:[U.NgIf,u._Y,u.JJ,u.JL,u.sg,u.u,T.lW,T.RK,$.Hw,Y.W,X.p,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,I.a8,I.hq,I.dn,I.n5]}),t})(),resolve:{team:t=>{const a=t.params.id;return(0,e.inject)(M).team(a)}}}];let ke=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.Bz.forChild($e),g.Bz]}),t})();var ze=s(35);let Ge=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[ze._,ke,I.QW]}),t})()},4044:(Q,D,s)=>{s.d(D,{$:()=>P});var g=s(4006),d=s(7641),e=s(8924),y=s(2340),l=s(4650),A=s(1305),i=s(529);let N=(()=>{class h{constructor(m){this._httpClient=m,this._url=y.N.url+"/api/v1/files/upload"}uploadFile(m,c,v,f){const C=new FormData;return C.append("file",m),C.append("fileType",c),C.append("eventType",v),C.append("nationalCode",f),this._httpClient.post(this._url,C)}}return h.\u0275fac=function(m){return new(m||h)(l.\u0275\u0275inject(i.eN))},h.\u0275prov=l.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();var B=s(599),H=s(867),O=s(6895),j=s(3162);function F(h,_){1&h&&l.\u0275\u0275element(0,"mat-progress-bar",4)}const V=["*"];let P=(()=>{class h{constructor(m,c,v,f){this._lightbox=m,this._uploadService=c,this._swalService=v,this._authSerivce=f,this.maxSize=500,this.nationalCode=this._authSerivce.getTokenItem("nationalCode"),this.isUploading=!1,this.onChange=C=>{},this.onTouched=()=>{},this.touched=!1,this.disabled=!1}writeValue(m){(0,d.Z)(m)||(this.src=y.N.url+"/api/v1/files/show/"+m)}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}validate(m){return m.hasValidator(g.kI.required)&&(0,e.Z)(this.src)?{required:!0}:null}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}setDisabledState(m){this.disabled=m}ngOnChanges(m){this.src=y.N.url+"/api/v1/files/show/"+this.lastImageid}onSelectedFile(m){this.markAsTouched();const c=m.target.files[0];this.maxSize<=c.size/1024?this._swalService.showErrorMessage("\u062d\u062c\u0645 \u0641\u0627\u06cc\u0644 \u0628\u06cc\u0634\u062a\u0631 \u0627\u0632 \u062d\u062f \u0645\u062c\u0627\u0632 \u0645\u06cc \u0628\u0627\u0634\u062f."):(this.isUploading=!0,this._uploadService.uploadFile(c,this.fileType,this.eventType,this.nationalCode).subscribe(v=>{this.onChange(v.entity.fileId),this.isUploading=!1,this.src=v.entity.filePath},()=>{this.isUploading=!1}))}onOpenImage(m){this._lightbox.open([{src:m.target.src,thumb:""}])}}return h.\u0275fac=function(m){return new(m||h)(l.\u0275\u0275directiveInject(A.ey),l.\u0275\u0275directiveInject(N),l.\u0275\u0275directiveInject(B.J),l.\u0275\u0275directiveInject(H.$))},h.\u0275cmp=l.\u0275\u0275defineComponent({type:h,selectors:[["app-image-uploader"]],inputs:{maxSize:"maxSize",accept:"accept",lastImageid:"lastImageid",fileType:"fileType",eventType:"eventType",nationalCode:"nationalCode"},features:[l.\u0275\u0275ProvidersFeature([{provide:g.JU,multi:!0,useExisting:h},{provide:g.Cf,multi:!0,useExisting:h}]),l.\u0275\u0275NgOnChangesFeature],ngContentSelectors:V,decls:6,vars:3,consts:[[1,"upload-btn-wrapper"],["type","file","name","myfile",3,"accept","change"],["onError","this.src= 'https://file.behroozbc.ir/no_logo.png'","alt","",3,"src","click"],["mode","query",4,"ngIf"],["mode","query"]],template:function(m,c){1&m&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275elementStart(0,"div",0)(1,"label"),l.\u0275\u0275projection(2),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"input",1),l.\u0275\u0275listener("change",function(f){return c.onSelectedFile(f)}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(4,"img",2),l.\u0275\u0275listener("click",function(f){return c.onOpenImage(f)}),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(5,F,1,0,"mat-progress-bar",3)),2&m&&(l.\u0275\u0275advance(3),l.\u0275\u0275property("accept",c.accept),l.\u0275\u0275advance(1),l.\u0275\u0275property("src",c.src,l.\u0275\u0275sanitizeUrl),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",c.isUploading))},dependencies:[O.NgIf,j.pW],styles:["img[_ngcontent-%COMP%]{display:inline;max-width:3rem;float:left}div[_ngcontent-%COMP%]{display:inline}"]}),h})()}}]);