"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[739],{5980:(g,p,o)=>{o.d(p,{g:()=>r});var r=(()=>{return(u=r||(r={}))[u.all=0]="all",u[u.needed=1]="needed",u[u.base=2]="base",r;var u})()},7846:(g,p,o)=>{o.d(p,{O:()=>u});var r=o(4650);let u=(()=>{class f{static nationalCodeChecker(i){if(!i.value)return null;if(!new RegExp("[0-9]{10}$").test(i.value))return{national:!0};if("0123456789"===i.value)return{national:!0};for(let d=0;d<10;d++)if(new RegExp(d+"{10}$").test(i.value))return{national:!0};let h=0;for(let d=0;d<9;d++)h+=(10-d)*+i.value.substr(d,1);const e=h%11,m=+i.value.substr(9,1);return e<2&&e===m||e>=2&&e===11-m?null:{national:!0}}static checkPasswords(i){return i.controls.password?.value===i.controls.confirmPassword?.value?null:{confirmPassword:!0}}constructor(){}SetStatus(i){return i.valid?"success":"error"}GetMessage(i){return i.getError("required")?"\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f\u0627\u0644\u0632\u0627\u0645\u06cc \u0645\u06cc\u0628\u0627\u0634\u062f.":i.getError("ascii")?"\u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f.":i.getError("national")?"\u06a9\u062f \u0645\u0644\u06cc \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f.":i.getError("email")?"\u0627\u06cc\u0645\u06cc\u0644 \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f.":i.getError("minlength")?" \u062d\u062f\u0627\u0642\u0644 \u0637\u0648\u0644 \u0645\u062c\u0627\u0632 \u0631\u0627 \u0631\u0639\u0627\u06cc\u062a \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f.":i.getError("maxlength")?"\u062d\u062f\u0627\u06a9\u062b\u0631 \u0637\u0648\u0644 \u0645\u062c\u0627\u0632 \u0631\u0627 \u0631\u0639\u0627\u06cc\u062a \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f":i.getError("pattern")?"\u0627\u0644\u06af\u0648 \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f":i.getError("phoneNumber")?"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f.":i.parent.getError("confirmPassword")?"\u067e\u0633\u0648\u0631\u062f \u0634\u0645\u0627 \u062a\u0637\u0627\u0628\u0642 \u0646\u062f\u0627\u0631\u062f.":i.getError("max")?"\u0645\u0642\u062f\u0627\u0631 \u06a9\u0645\u062a\u0631\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f":i.getError("min")?"\u0645\u0642\u062f\u0627\u0631 \u0628\u0627\u0644\u0627\u062a\u0631\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f":""}}return f.\u0275fac=function(i){return new(i||f)},f.\u0275prov=r.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},2676:(g,p,o)=>{o.d(p,{p:()=>G});var r=o(4006),u=o(1441),f=o(8924),C=o(5980),i=(()=>{return(l=i||(i={}))[l.all=-1]="all",l[l.manthra=0]="manthra",l[l.ordoo=1]="ordoo",l[l.jam=2]="jam",i;var l})(),h=o(7846),e=o(4650),m=o(5412),d=o(9840),b=o(6842),s=o(5130),I=o(7210),Z=o(599),P=o(6895),y=o(4144),v=o(9549),A=o(4859),E=o(4385),_=o(3238),k=o(4044),T=o(9602);function J(l,c){if(1&l&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&l){const t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function M(l,c){if(1&l&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&l){const t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.lable," ")}}let U=(()=>{class l{constructor(t,n,a,S){this.data=t,this._swalService=n,this._dialogRef=S,this._profileService=(0,e.f3M)(b.x),this.cites=s.I,this.sexTypes=I.D,this.profile=t.profile,this.fGroup=a.group({nationalCode:a.control(this.profile.nationalCode,[r.kI.required]),name:a.control(this.profile.name,[r.kI.required]),family:a.control(this.profile.family,[r.kI.required]),sex:a.control(I.D.find(x=>x.lable==this.profile.sex)?.value??0,[r.kI.required]),birthday:a.control(d(this.profile.birthday,"jYYYY/jMM/jDD"),[r.kI.required]),IdCardPhoto:a.control(this.profile.IdCardPhoto,[r.kI.required]),city:a.control(s.I.find(x=>x.label==this.profile.city)?.value??0,[r.kI.required]),personalPhoto:a.control(this.profile.personalPhoto,[r.kI.required])})}onSaveProfile(){const t=this.fGroup.value,n={nationalCode:t.nationalCode,name:t.name,family:t.family,city:t.city,birthday:t.birthday.format("jYYYY/jMM/jDD"),IdCardPhoto:t.IdCardPhoto,personalPhoto:t.personalPhoto,sex:t.sex};this._profileService.saveProfileWithNationalCode(n).subscribe(a=>{this._swalService.successFullSubmited(),this._dialogRef.close(!0)})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(m.WI),e.Y36(Z.J),e.Y36(r.qu),e.Y36(m.so))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-set-minimum-profile-dialog"]],decls:40,vars:9,consts:[["mat-dialog-title",""],[1,"flex","flex-col",3,"formGroup"],["formControlName","name","matInput",""],["formControlName","family","matInput",""],["formControlName","birthday","matInput","",3,"matDatepicker","disabled"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],["formControlName","city"],[3,"value",4,"ngFor","ngForOf"],["align","start"],["formControlName","sex"],["fileType","0","eventType","-1","accept","image/jpeg","formControlName","personalPhoto",3,"nationalCode"],["fileType","1","eventType","-1","accept","image/jpeg","formControlName","IdCardPhoto",3,"nationalCode"],["mat-button","",3,"mat-dialog-close"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h2",0),e._uU(1,"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644 \u062c\u062f\u06cc\u062f"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6," \u0646\u0627\u0645 "),e.qZA(),e._UZ(7,"input",2),e.qZA(),e.TgZ(8,"mat-form-field")(9,"mat-label"),e._uU(10," \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc "),e.qZA(),e._UZ(11,"input",3),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f"),e.qZA(),e._UZ(15,"input",4)(16,"mat-datepicker-toggle",5)(17,"mat-datepicker",6,7),e.qZA(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"\u0634\u0647\u0631"),e.qZA(),e.TgZ(22,"mat-select",8),e.YNc(23,J,2,2,"mat-option",9),e.qZA(),e.TgZ(24,"mat-hint",10),e._uU(25,"\u0634\u0647\u0631 \u0645\u062d\u0644 \u0632\u0646\u062f\u06af\u06cc"),e.qZA()(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28,"\u062c\u0646\u0633\u06cc\u062a"),e.qZA(),e.TgZ(29,"mat-select",11),e.YNc(30,M,2,2,"mat-option",9),e.qZA()(),e.TgZ(31,"app-image-uploader",12),e._uU(32," \u0639\u06a9\u0633 \u067e\u0631\u0633\u0646\u0644\u06cc"),e.qZA(),e.TgZ(33,"app-image-uploader",13),e._uU(34," \u0639\u06a9\u0633 \u0634\u0646\u0627\u0633\u0646\u0627\u0645\u0647"),e.qZA()()(),e.TgZ(35,"mat-dialog-actions")(36,"button",14),e._uU(37,"\u0628\u0633\u062a\u0646"),e.qZA(),e.TgZ(38,"button",15),e.NdJ("click",function(){return n.onSaveProfile()}),e._uU(39,"\u0630\u062e\u06cc\u0631\u0647"),e.qZA()()),2&t){const a=e.MAs(18);e.xp6(3),e.Q6J("formGroup",n.fGroup),e.xp6(12),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(7),e.Q6J("ngForOf",n.cites),e.xp6(7),e.Q6J("ngForOf",n.sexTypes),e.xp6(1),e.Q6J("nationalCode",n.data.profile.nationalCode),e.xp6(2),e.Q6J("nationalCode",n.data.profile.nationalCode),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("disabled",n.fGroup.invalid)}},dependencies:[P.sg,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,y.Nt,v.KE,v.hX,v.bx,v.R9,A.lW,E.gD,_.ey,m.ZT,m.uh,m.xY,m.H8,k.$,T.Mq,T.hl,T.nW]}),l})();var D=o(7009),N=o(2403),Y=o(7392);function F(l,c){1&l&&(e.TgZ(0,"mat-icon",2),e._uU(1,"check"),e.qZA())}function Q(l,c){1&l&&(e.TgZ(0,"mat-icon",2),e._uU(1,"error"),e.qZA())}function j(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onEditProfileClick())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()}}function R(l,c){1&l&&(e.TgZ(0,"a",13),e._uU(1,"\u062a\u0645\u062f\u06cc\u062f \u0627\u0639\u062a\u0628\u0627\u0631 \u0628\u06cc\u0645\u0647 \u0648\u0631\u0632\u0634\u06cc"),e.qZA())}function O(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"span"),e._uU(3,"\u062a\u0627\u0631\u06cc\u062e \u0627\u0639\u062a\u0628\u0627\u0631 \u0628\u06cc\u0645\u0647 \u0648\u0631\u0632\u0634\u06cc: "),e.qZA(),e._UZ(4,"span",6),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onRefreshSportInsurance())}),e.TgZ(6,"mat-icon"),e._uU(7,"refresh"),e.qZA()()(),e.YNc(8,R,2,0,"a",12),e.qZA()}if(2&l){const t=e.oxw();let n;e.xp6(4),e.Q6J("innerText",null!==(n=null==t.sportInsurance?null:t.sportInsurance.persianExpireDate)&&void 0!==n?n:"-"),e.xp6(4),e.Q6J("ngIf",!(null!=t.sportInsurance&&t.sportInsurance.membershipIsExpired))}}const V=["*"];let G=(()=>{class l{constructor(t,n,a,S,x){this._profileService=t,this._snackBar=n,this._dialog=a,this._sportInsuranceRepository=x,this.onTouched=()=>{},this.touched=!1,this.isDisabled=!1,this.fControl=S.nonNullable.control("",[h.O.nationalCodeChecker]),this.fControl.valueChanges.subscribe(()=>{this.markAsTouched()})}writeValue(t){this.fControl.setValue(t)}registerOnChange(t){this.fControl.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}validate(t){return this.profileMode==C.g.base||!(0,u.Z)(this.sportInsurance)&&this.sportInsurance.membershipIsExpired?t.hasValidator(r.kI.required)&&(0,f.Z)(this.fControl.value)?{required:!0}:0==this.profile?.isCompleted||(0,u.Z)(this.profile)?{inCompletedProfile:!0}:null:{sportInsurace:!0}}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}onEditProfileClick(){this._dialog.open(U,{data:{profile:this.profile.profile,mode:this.profileMode},disableClose:!0}).afterClosed().subscribe(n=>{!0===n&&this.onSearchProfile()})}onSearchProfile(){this._profileService.getProfileWithNationalCode(this.fControl.value,i.jam,this.profileMode).subscribe(t=>{this.profile=t,this.fControl.updateValueAndValidity()}),this.profileMode!=C.g.base&&this.onRefreshSportInsurance()}onRefreshSportInsurance(){this._sportInsuranceRepository.check(this.fControl.value).subscribe(t=>{this.sportInsurance=t,this.fControl.updateValueAndValidity(),t.membershipIsExpired||this._snackBar.open("\u0628\u06cc\u0645\u0647 \u0648\u0631\u0632\u0634\u06cc \u0628\u0627\u0632\u06cc\u06a9\u0646 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0627\u0639\u062a\u0628\u0627\u0631 \u0646\u062f\u0627\u0631\u062f. \u0644\u0637\u0641\u0627 \u0627\u0639\u062a\u0628\u0627\u0631 \u0628\u06cc\u0645\u0647 \u0631\u0627 \u062a\u0645\u062f\u06cc\u062f \u06a9\u0646\u06cc\u062f.","\u062a\u0645\u062f\u06cc\u062f").onAction().subscribe(()=>{window.open("http://ifsm.ir","_blank")})})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(b.x),e.Y36(D.ux),e.Y36(m.uw),e.Y36(r.qu),e.Y36(N.J))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-profile-check-input"]],inputs:{profileMode:"profileMode"},features:[e._Bn([{provide:r.JU,multi:!0,useExisting:l},{provide:r.Cf,multi:!0,useExisting:l}])],ngContentSelectors:V,decls:14,vars:7,consts:[[1,"flex","flex-row","flex-warp","gap-1","max-md:flex-col","items-center"],["matInput","",3,"formControl"],["matSuffix",""],["color","accent","matSuffix","","type","button","mat-icon-button","",3,"disabled","click"],["matSuffix","",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"innerText"],["class","md:mr-3 flex flex-row flex-warp max-md:flex-col items-center",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"md:mr-3","flex","flex-row","flex-warp","max-md:flex-col","items-center"],[1,"flex","flex-row","items-center"],["mat-icon-button","",3,"click"],["mat-flat-button","","color","warn","target","_blank","href","http://ifsm.ir",4,"ngIf"],["mat-flat-button","","color","warn","target","_blank","href","http://ifsm.ir"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e.Hsn(3),e.qZA(),e._UZ(4,"input",1),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return n.onSearchProfile()}),e.TgZ(7,"mat-icon"),e._uU(8,"search"),e.qZA()(),e.YNc(9,F,2,0,"mat-icon",4),e.YNc(10,Q,2,0,"mat-icon",4),e.qZA()(),e.YNc(11,j,3,0,"button",5),e._UZ(12,"span",6),e.YNc(13,O,9,2,"div",7),e.qZA()),2&t){let a;e.xp6(4),e.Q6J("formControl",n.fControl),e.xp6(2),e.Q6J("disabled",n.fControl.invalid||n.fControl.untouched),e.xp6(3),e.Q6J("ngIf",null==n.profile?null:n.profile.isCompleted),e.xp6(1),e.Q6J("ngIf",!(null!=n.profile&&n.profile.isCompleted)),e.xp6(1),e.Q6J("ngIf",null==n.profile?null:n.profile.editable),e.xp6(1),e.Q6J("innerText",(null!==(a=null==n.profile||null==n.profile.profile?null:n.profile.profile.name)&&void 0!==a?a:"-")+" "+(null!==(a=null==n.profile||null==n.profile.profile?null:n.profile.profile.family)&&void 0!==a?a:"-")),e.xp6(1),e.Q6J("ngIf",null!=n.sportInsurance)}},dependencies:[P.O5,r.Fj,r.JJ,r.oH,y.Nt,v.KE,v.hX,v.R9,A.zs,A.RK,Y.Hw],styles:["span[_ngcontent-%COMP%]{display:inline}"]}),l})()},35:(g,p,o)=>{o.d(p,{_:()=>b});var r=o(9759),u=o(9602),f=o(3238),C=o(5784),i=o(5412),h=o(4650);let e=(()=>{class s{}return s.\u0275fac=function(Z){return new(Z||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:[{provide:f._A,useClass:C.e,deps:[f.Ad]},{provide:f.sG,useValue:C.A}],imports:[r.m,u.FA,i.Is]}),s})();var m=o(2143),d=o(3546);let b=(()=>{class s{}return s.\u0275fac=function(Z){return new(Z||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[r.m,e,m.p0,d.QW,r.m,e,m.p0,d.QW]}),s})()},2403:(g,p,o)=>{o.d(p,{J:()=>C});var r=o(2340),u=o(4650),f=o(529);let C=(()=>{class i{constructor(e){this._http=e,this._url=r.N.url+"/api/v1/account/jam/sport-insurance"}get sportInsurance(){return this._http.get(this._url)}check(e){return this._http.get(this._url+`/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(f.eN))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5130:(g,p,o)=>{o.d(p,{I:()=>r});const r=[{value:1,label:"\u062a\u0647\u0631\u0627\u0646"},{value:2,label:"\u06cc\u0632\u062f"},{value:3,label:"\u0634\u06cc\u0631\u0627\u0632"},{value:4,label:"\u0627\u0635\u0641\u0647\u0627\u0646"},{value:5,label:"\u06a9\u0631\u0645\u0627\u0646"},{value:6,label:"\u06a9\u0631\u062c"},{value:7,label:"\u0627\u0647\u0648\u0627\u0632"},{value:8,label:"\u0632\u0627\u0647\u062f\u0627\u0646"}]},7210:(g,p,o)=>{o.d(p,{D:()=>r});const r=[{value:1,lable:"\u0645\u0631\u062f"},{value:0,lable:"\u0632\u0646"}]}}]);