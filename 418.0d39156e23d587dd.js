"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[418],{7418:(x,C,n)=>{n.r(C),n.d(C,{DormitoryModule:()=>j});var l=n(6630),m=n(2143),s=n(1441),t=n(4650),i=n(4006),c=n(2340),g=n(529);let f=(()=>{class o{constructor(e){this._http=e,this._url=c.N.url+"/api/v1/account/jam/dormitory"}get dorms(){return this._http.get(this._url)}register(e){return this._http.post(this._url,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=n(9549),y=n(4859),u=n(4385),h=n(3238),d=n(3546);function Z(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0646\u0627\u0645 "),t.qZA())}function T(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.profile.name+" "+e.profile.family," ")}}function A(o,r){1&o&&t._UZ(0,"th",14)}function D(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.index;t.xp6(1),t.hij(" ",e+1," ")}}function I(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0634\u0645\u0627\u0631\u0647 \u067e\u06cc\u06af\u06cc\u0631\u06cc"),t.qZA())}function P(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.$implicit;let a;t.xp6(1),t.hij(" ",null!==(a=null==e.dormitory?null:e.dormitory.refId)&&void 0!==a?a:"-"," ")}}function R(o,r){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0647\u0632\u06cc\u0646\u0647"),t.qZA())}function J(o,r){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",null==e.dormitory?null:e.dormitory.refId," ")}}function S(o,r){1&o&&(t.TgZ(0,"th",16),t._uU(1,"\u0633\u0628\u06a9 \u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA())}function N(o,r){if(1&o&&(t.TgZ(0,"td",15)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"\u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA(),t.TgZ(4,"mat-select",17)(5,"mat-option",18),t._uU(6,"\u0628\u06cc \u063a\u0630\u0627"),t.qZA(),t.TgZ(7,"mat-option",18),t._uU(8,"\u0646\u0627\u0647\u0627\u0631"),t.qZA(),t.TgZ(9,"mat-option",18),t._uU(10,"\u0646\u0627\u0647\u0627\u0631 \u0648 \u0634\u0627\u0645"),t.qZA()()()()),2&o){const e=r.$implicit;t.xp6(4),t.Q6J("formControlName",e.profile.nationalCode),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3)}}function Q(o,r){1&o&&t._UZ(0,"tr",19)}function U(o,r){1&o&&t._UZ(0,"tr",20)}const Y=[{path:"",component:(()=>{class o{constructor(e,a,v){this._fb=a,this._dormRepository=v,this.displayedColumns=["index","name","action","refId"],this.dorms=e.snapshot.data.dorms,this.dataSource=new m.by(this.dorms),this.fRecord=a.record({})}ngOnInit(){for(const e of this.dorms){const a=this._fb.control(e.dormitory?.type);(0,s.Z)(e.dormitory?.authority)||a.disable(),this.fRecord.addControl(e.profile.nationalCode,a)}}onSubmit(){const e={dorms:this.dorms.filter(a=>(0,s.Z)(a.dormitory?.refId)).map(a=>({nationalCode:a.profile.nationalCode,type:this.fRecord.value[a.profile.nationalCode]}))};this._dormRepository.register(e).subscribe(a=>window.location.replace(a.action))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.gz),t.Y36(i.qu),t.Y36(f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-index-page"]],decls:26,vars:5,consts:[[3,"formGroup","submit"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","refId"],["matColumnDef","amount"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"formControlName"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return a.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-title"),t._uU(3,"\u062e\u0648\u0627\u0628\u06af\u0627\u0647"),t.qZA(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,Z,2,0,"th",3),t.YNc(8,T,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,A,1,0,"th",3),t.YNc(11,D,2,1,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,I,2,0,"th",3),t.YNc(14,P,2,1,"td",4),t.BQk(),t.ynx(15,7),t.YNc(16,R,2,0,"th",3),t.YNc(17,J,2,1,"td",4),t.BQk(),t.ynx(18,8),t.YNc(19,S,2,0,"th",9),t.YNc(20,N,11,4,"td",4),t.BQk(),t.YNc(21,Q,1,0,"tr",10),t.YNc(22,U,1,0,"tr",11),t.qZA()(),t.TgZ(23,"mat-card-actions",12)(24,"button",13),t._uU(25,"\u067e\u0631\u062f\u0627\u062e\u062a"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",a.fRecord),t.xp6(5),t.Q6J("dataSource",a.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("disabled",a.fRecord.invalid))},dependencies:[i._Y,i.JJ,i.JL,i.sg,i.u,p.KE,p.hX,y.lW,u.gD,h.ey,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.a8,d.hq,d.dn,d.n5]}),o})(),resolve:{dorms:o=>(0,t.f3M)(f).dorms}}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(Y),l.Bz]}),o})();var B=n(35);let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[B._,M,d.QW]}),o})()},35:(x,C,n)=>{n.d(C,{_:()=>y});var l=n(9759),m=n(9602),s=n(3238),t=n(5784),i=n(5412),c=n(4650);let g=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=c.oAB({type:u}),u.\u0275inj=c.cJS({providers:[{provide:s._A,useClass:t.e,deps:[s.Ad]},{provide:s.sG,useValue:t.A}],imports:[l.m,m.FA,i.Is]}),u})();var f=n(2143),p=n(3546);let y=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=c.oAB({type:u}),u.\u0275inj=c.cJS({imports:[l.m,g,f.p0,p.QW,l.m,g,f.p0,p.QW]}),u})()}}]);