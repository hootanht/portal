"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[676],{5980:(C,c,i)=>{i.d(c,{g:()=>l});var l=(()=>{return(a=l||(l={}))[a.all=0]="all",a[a.needed=1]="needed",a[a.base=2]="base",l;var a})()},7846:(C,c,i)=>{i.d(c,{O:()=>a});var l=i(4650);let a=(()=>{class f{static nationalCodeChecker(r){if(!r.value)return null;if(!new RegExp("[0-9]{10}$").test(r.value))return{national:!0};if("0123456789"===r.value)return{national:!0};for(let m=0;m<10;m++)if(new RegExp(m+"{10}$").test(r.value))return{national:!0};let h=0;for(let m=0;m<9;m++)h+=(10-m)*+r.value.substr(m,1);const e=h%11,p=+r.value.substr(9,1);return e<2&&e===p||e>=2&&e===11-p?null:{national:!0}}static checkPasswords(r){return r.controls.password?.value===r.controls.confirmPassword?.value?null:{confirmPassword:!0}}constructor(){}SetStatus(r){return r.valid?"success":"error"}GetMessage(r){return r.getError("required")?"\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f\u0627\u0644\u0632\u0627\u0645\u06cc \u0645\u06cc\u0628\u0627\u0634\u062f.":r.getError("ascii")?"\u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f.":r.getError("national")?"\u06a9\u062f \u0645\u0644\u06cc \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f.":r.getError("email")?"\u0627\u06cc\u0645\u06cc\u0644 \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f.":r.getError("minlength")?" \u062d\u062f\u0627\u0642\u0644 \u0637\u0648\u0644 \u0645\u062c\u0627\u0632 \u0631\u0627 \u0631\u0639\u0627\u06cc\u062a \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f.":r.getError("maxlength")?"\u062d\u062f\u0627\u06a9\u062b\u0631 \u0637\u0648\u0644 \u0645\u062c\u0627\u0632 \u0631\u0627 \u0631\u0639\u0627\u06cc\u062a \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f":r.getError("pattern")?"\u0627\u0644\u06af\u0648 \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f":r.getError("phoneNumber")?"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0634\u0645\u0627 \u062f\u0631\u0633\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f.":r.parent.getError("confirmPassword")?"\u067e\u0633\u0648\u0631\u062f \u0634\u0645\u0627 \u062a\u0637\u0627\u0628\u0642 \u0646\u062f\u0627\u0631\u062f.":r.getError("max")?"\u0645\u0642\u062f\u0627\u0631 \u06a9\u0645\u062a\u0631\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f":r.getError("min")?"\u0645\u0642\u062f\u0627\u0631 \u0628\u0627\u0644\u0627\u062a\u0631\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f":""}}return f.\u0275fac=function(r){return new(r||f)},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},2676:(C,c,i)=>{i.d(c,{p:()=>w});var l=i(4006),a=i(1441),f=i(8924),v=i(5980),r=(()=>{return(n=r||(r={}))[n.all=-1]="all",n[n.manthra=0]="manthra",n[n.ordoo=1]="ordoo",n[n.jam=2]="jam",r;var n})(),h=i(7846),e=i(4650),p=i(5412),m=i(9840),b=i(6842),x=i(5130),T=i(7210),E=i(599),A=i(6895),k=i(4144),d=i(9549),I=i(4859),P=i(4385),y=i(3238),S=i(4044),_=i(9602);function J(n,s){if(1&n&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function U(n,s){if(1&n&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.lable," ")}}let D=(()=>{class n{constructor(t,o,u,Z){this.data=t,this._swalService=o,this._dialogRef=Z,this._profileService=(0,e.f3M)(b.x),this.cites=x.I,this.sexTypes=T.D,this.profile=t.profile,this.fGroup=u.group({nationalCode:u.control(this.profile.nationalCode,[l.kI.required]),name:u.control(this.profile.name,[l.kI.required]),family:u.control(this.profile.family,[l.kI.required]),sex:u.control(T.D.find(g=>g.lable==this.profile.sex)?.value??0,[l.kI.required]),birthday:u.control(m(this.profile.birthday,"jYYYY/jMM/jDD"),[l.kI.required]),IdCardPhoto:u.control(this.profile.IdCardPhoto,[l.kI.required]),city:u.control(x.I.find(g=>g.label==this.profile.city)?.value??0,[l.kI.required]),personalPhoto:u.control(this.profile.personalPhoto,[l.kI.required])})}onSaveProfile(){const t=this.fGroup.value,o={nationalCode:t.nationalCode,name:t.name,family:t.family,city:t.city,birthday:t.birthday.format("jYYYY/jMM/jDD"),IdCardPhoto:t.IdCardPhoto,personalPhoto:t.personalPhoto,sex:t.sex};this._profileService.saveProfileWithNationalCode(o).subscribe(u=>{this._swalService.successFullSubmited(),this._dialogRef.close(!0)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.WI),e.Y36(E.J),e.Y36(l.qu),e.Y36(p.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-set-minimum-profile-dialog"]],decls:40,vars:9,consts:[["mat-dialog-title",""],[1,"flex","flex-col",3,"formGroup"],["formControlName","name","matInput",""],["formControlName","family","matInput",""],["formControlName","birthday","matInput","",3,"matDatepicker","disabled"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],["formControlName","city"],[3,"value",4,"ngFor","ngForOf"],["align","start"],["formControlName","sex"],["fileType","0","eventType","-1","accept","image/jpeg","formControlName","personalPhoto",3,"nationalCode"],["fileType","1","eventType","-1","accept","image/jpeg","formControlName","IdCardPhoto",3,"nationalCode"],["mat-button","",3,"mat-dialog-close"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"h2",0),e._uU(1,"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644 \u062c\u062f\u06cc\u062f"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6," \u0646\u0627\u0645 "),e.qZA(),e._UZ(7,"input",2),e.qZA(),e.TgZ(8,"mat-form-field")(9,"mat-label"),e._uU(10," \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc "),e.qZA(),e._UZ(11,"input",3),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f"),e.qZA(),e._UZ(15,"input",4)(16,"mat-datepicker-toggle",5)(17,"mat-datepicker",6,7),e.qZA(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"\u0634\u0647\u0631"),e.qZA(),e.TgZ(22,"mat-select",8),e.YNc(23,J,2,2,"mat-option",9),e.qZA(),e.TgZ(24,"mat-hint",10),e._uU(25,"\u0634\u0647\u0631 \u0645\u062d\u0644 \u0632\u0646\u062f\u06af\u06cc"),e.qZA()(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28,"\u062c\u0646\u0633\u06cc\u062a"),e.qZA(),e.TgZ(29,"mat-select",11),e.YNc(30,U,2,2,"mat-option",9),e.qZA()(),e.TgZ(31,"app-image-uploader",12),e._uU(32," \u0639\u06a9\u0633 \u067e\u0631\u0633\u0646\u0644\u06cc"),e.qZA(),e.TgZ(33,"app-image-uploader",13),e._uU(34," \u0639\u06a9\u0633 \u0634\u0646\u0627\u0633\u0646\u0627\u0645\u0647"),e.qZA()()(),e.TgZ(35,"mat-dialog-actions")(36,"button",14),e._uU(37,"\u0628\u0633\u062a\u0646"),e.qZA(),e.TgZ(38,"button",15),e.NdJ("click",function(){return o.onSaveProfile()}),e._uU(39,"\u0630\u062e\u06cc\u0631\u0647"),e.qZA()()),2&t){const u=e.MAs(18);e.xp6(3),e.Q6J("formGroup",o.fGroup),e.xp6(12),e.Q6J("matDatepicker",u),e.xp6(1),e.Q6J("for",u),e.xp6(7),e.Q6J("ngForOf",o.cites),e.xp6(7),e.Q6J("ngForOf",o.sexTypes),e.xp6(1),e.Q6J("nationalCode",o.data.profile.nationalCode),e.xp6(2),e.Q6J("nationalCode",o.data.profile.nationalCode),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("disabled",o.fGroup.invalid)}},dependencies:[A.sg,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,k.Nt,d.KE,d.hX,d.bx,d.R9,I.lW,P.gD,y.ey,p.ZT,p.uh,p.xY,p.H8,S.$,_.Mq,_.hl,_.nW]}),n})();var M=i(7009),N=i(2403),Y=i(7392);function F(n,s){1&n&&(e.TgZ(0,"mat-icon",2),e._uU(1,"check"),e.qZA())}function Q(n,s){1&n&&(e.TgZ(0,"mat-icon",2),e._uU(1,"error"),e.qZA())}function R(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.onEditProfileClick())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()}}function j(n,s){1&n&&(e.TgZ(0,"a",13),e._uU(1,"\u062a\u0645\u062f\u06cc\u062f \u0627\u0639\u062a\u0628\u0627\u0631 \u0628\u06cc\u0645\u0647 \u0648\u0631\u0632\u0634\u06cc"),e.qZA())}function O(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"span"),e._uU(3,"\u062a\u0627\u0631\u06cc\u062e \u0627\u0639\u062a\u0628\u0627\u0631 \u0628\u06cc\u0645\u0647 \u0648\u0631\u0632\u0634\u06cc: "),e.qZA(),e._UZ(4,"span",6),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.onRefreshSportInsurance())}),e.TgZ(6,"mat-icon"),e._uU(7,"refresh"),e.qZA()()(),e.YNc(8,j,2,0,"a",12),e.qZA()}if(2&n){const t=e.oxw();let o;e.xp6(4),e.Q6J("innerText",null!==(o=null==t.sportInsurance?null:t.sportInsurance.persianExpireDate)&&void 0!==o?o:"-"),e.xp6(4),e.Q6J("ngIf",!(null!=t.sportInsurance&&t.sportInsurance.membershipIsExpired))}}const q=["*"];let w=(()=>{class n{constructor(t,o,u,Z,g){this._profileService=t,this._snackBar=o,this._dialog=u,this._sportInsuranceRepository=g,this.onTouched=()=>{},this.touched=!1,this.isDisabled=!1,this.fControl=Z.nonNullable.control("",[h.O.nationalCodeChecker]),this.fControl.valueChanges.subscribe(()=>{this.markAsTouched()})}writeValue(t){this.fControl.setValue(t)}registerOnChange(t){this.fControl.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}validate(t){return this.profileMode==v.g.base||!(0,a.Z)(this.sportInsurance)&&this.sportInsurance.membershipIsExpired?t.hasValidator(l.kI.required)&&(0,f.Z)(this.fControl.value)?{required:!0}:0==this.profile?.isCompleted||(0,a.Z)(this.profile)?{inCompletedProfile:!0}:null:{sportInsurace:!0}}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}onEditProfileClick(){this._dialog.open(D,{data:{profile:this.profile.profile,mode:this.profileMode},disableClose:!0}).afterClosed().subscribe(o=>{!0===o&&this.onSearchProfile()})}onSearchProfile(){this._profileService.getProfileWithNationalCode(this.fControl.value,r.jam,this.profileMode).subscribe(t=>{this.profile=t,this.fControl.updateValueAndValidity()}),this.onRefreshSportInsurance()}onRefreshSportInsurance(){this._sportInsuranceRepository.check(this.fControl.value).subscribe(t=>{this.sportInsurance=t,this.fControl.updateValueAndValidity(),t.membershipIsExpired||this._snackBar.open("\u0628\u06cc\u0645\u0647 \u0648\u0631\u0632\u0634\u06cc \u0628\u0627\u0632\u06cc\u06a9\u0646 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0627\u0639\u062a\u0628\u0627\u0631 \u0646\u062f\u0627\u0631\u062f. \u0644\u0637\u0641\u0627 \u0627\u0639\u062a\u0628\u0627\u0631 \u0628\u06cc\u0645\u0647 \u0631\u0627 \u062a\u0645\u062f\u06cc\u062f \u06a9\u0646\u06cc\u062f.","\u062a\u0645\u062f\u06cc\u062f").onAction().subscribe(()=>{window.open("http://ifsm.ir","_blank")})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.x),e.Y36(M.ux),e.Y36(p.uw),e.Y36(l.qu),e.Y36(N.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-check-input"]],inputs:{profileMode:"profileMode"},features:[e._Bn([{provide:l.JU,multi:!0,useExisting:n},{provide:l.Cf,multi:!0,useExisting:n}])],ngContentSelectors:q,decls:14,vars:7,consts:[[1,"flex","flex-row","flex-warp","gap-1","max-md:flex-col","items-center"],["matInput","",3,"formControl"],["matSuffix",""],["color","accent","matSuffix","","type","button","mat-icon-button","",3,"disabled","click"],["matSuffix","",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"innerText"],["class","md:mr-3 flex flex-row flex-warp max-md:flex-col items-center",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"md:mr-3","flex","flex-row","flex-warp","max-md:flex-col","items-center"],[1,"flex","flex-row","items-center"],["mat-icon-button","",3,"click"],["mat-flat-button","","color","warn","target","_blank","href","http://ifsm.ir",4,"ngIf"],["mat-flat-button","","color","warn","target","_blank","href","http://ifsm.ir"]],template:function(t,o){if(1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e.Hsn(3),e.qZA(),e._UZ(4,"input",1),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return o.onSearchProfile()}),e.TgZ(7,"mat-icon"),e._uU(8,"search"),e.qZA()(),e.YNc(9,F,2,0,"mat-icon",4),e.YNc(10,Q,2,0,"mat-icon",4),e.qZA()(),e.YNc(11,R,3,0,"button",5),e._UZ(12,"span",6),e.YNc(13,O,9,2,"div",7),e.qZA()),2&t){let u;e.xp6(4),e.Q6J("formControl",o.fControl),e.xp6(2),e.Q6J("disabled",o.fControl.invalid||o.fControl.untouched),e.xp6(3),e.Q6J("ngIf",null==o.profile?null:o.profile.isCompleted),e.xp6(1),e.Q6J("ngIf",!(null!=o.profile&&o.profile.isCompleted)),e.xp6(1),e.Q6J("ngIf",null==o.profile?null:o.profile.editable),e.xp6(1),e.Q6J("innerText",(null!==(u=null==o.profile||null==o.profile.profile?null:o.profile.profile.name)&&void 0!==u?u:"-")+" "+(null!==(u=null==o.profile||null==o.profile.profile?null:o.profile.profile.family)&&void 0!==u?u:"-")),e.xp6(1),e.Q6J("ngIf",null!=o.sportInsurance)}},dependencies:[A.O5,l.Fj,l.JJ,l.oH,k.Nt,d.KE,d.hX,d.R9,I.zs,I.RK,Y.Hw],styles:["span[_ngcontent-%COMP%]{display:inline}"]}),n})()},2403:(C,c,i)=>{i.d(c,{J:()=>v});var l=i(2340),a=i(4650),f=i(529);let v=(()=>{class r{constructor(e){this._http=e,this._url=l.N.url+"/api/v1/account/jam/sport-insurance"}get sportInsurance(){return this._http.get(this._url)}check(e){return this._http.get(this._url+`/${e}`)}}return r.\u0275fac=function(e){return new(e||r)(a.LFG(f.eN))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},5130:(C,c,i)=>{i.d(c,{I:()=>l});const l=[{value:1,label:"\u062a\u0647\u0631\u0627\u0646"},{value:2,label:"\u06cc\u0632\u062f"},{value:3,label:"\u0634\u06cc\u0631\u0627\u0632"},{value:4,label:"\u0627\u0635\u0641\u0647\u0627\u0646"},{value:5,label:"\u06a9\u0631\u0645\u0627\u0646"},{value:6,label:"\u06a9\u0631\u062c"},{value:7,label:"\u0627\u0647\u0648\u0627\u0632"},{value:8,label:"\u0632\u0627\u0647\u062f\u0627\u0646"}]},7210:(C,c,i)=>{i.d(c,{D:()=>l});const l=[{value:1,lable:"\u0645\u0631\u062f"},{value:0,lable:"\u0632\u0646"}]}}]);