"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[418],{7418:(x,h,n)=>{n.r(h),n.d(h,{DormitoryModule:()=>B});var l=n(6630),m=n(2143),s=n(1441),t=n(4650),i=n(4006),c=n(2340),g=n(529);let f=(()=>{class o{constructor(e){this._http=e,this._url=c.N.url+"/api/v1/account/jam/dormitory"}get dorms(){return this._http.get(this._url)}register(e){return this._http.post(this._url,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=n(9549),y=n(4859),a=n(4385),C=n(3238),d=n(3546);function Z(o,u){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0646\u0627\u0645 "),t.qZA())}function F(o,u){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=u.$implicit;t.xp6(1),t.hij(" ",e.profile.name+" "+e.profile.family," ")}}function T(o,u){1&o&&t._UZ(0,"th",14)}function A(o,u){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=u.index;t.xp6(1),t.hij(" ",e+1," ")}}function D(o,u){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0634\u0645\u0627\u0631\u0647 \u067e\u06cc\u06af\u06cc\u0631\u06cc"),t.qZA())}function I(o,u){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=u.$implicit;let r;t.xp6(1),t.hij(" ",null!==(r=null==e.dormitory?null:e.dormitory.refId)&&void 0!==r?r:"-"," ")}}function P(o,u){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0647\u0632\u06cc\u0646\u0647"),t.qZA())}function R(o,u){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=u.$implicit;t.xp6(1),t.hij(" ",null==e.dormitory?null:e.dormitory.refId," ")}}function J(o,u){1&o&&(t.TgZ(0,"th",16),t._uU(1,"\u0633\u0628\u06a9 \u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA())}function S(o,u){if(1&o&&(t.TgZ(0,"td",15)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"\u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA(),t.TgZ(4,"mat-select",17)(5,"mat-option",18),t._uU(6,"\u0628\u062f\u0648\u0646 \u063a\u0630\u0627- \u06f5\u06f0\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA(),t.TgZ(7,"mat-option",18),t._uU(8,"\u0641\u0642\u0637 \u0634\u0627\u0645- \u06f4\u06f5\u06f0\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA(),t.TgZ(9,"mat-option",18),t._uU(10,"\u0635\u0628\u062d\u0627\u0646\u0647 \u0646\u0627\u0647\u0627\u0631 \u0634\u0627\u0645-\u06f9\u06f5\u06f0\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA()()()()),2&o){const e=u.$implicit;t.xp6(4),t.Q6J("formControlName",e.profile.nationalCode),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3)}}function N(o,u){1&o&&t._UZ(0,"tr",19)}function Q(o,u){1&o&&t._UZ(0,"tr",20)}const U=[{path:"",component:(()=>{class o{constructor(e,r,v){this._fb=r,this._dormRepository=v,this.displayedColumns=["index","name","action","refId"],this.dorms=e.snapshot.data.dorms,this.dataSource=new m.by(this.dorms),this.fRecord=r.record({})}ngOnInit(){for(const e of this.dorms){const r=this._fb.control(e.dormitory?.type);(0,s.Z)(e.dormitory?.authority)||r.disable(),this.fRecord.addControl(e.profile.nationalCode,r)}}onSubmit(){const e={dorms:this.dorms.filter(r=>(0,s.Z)(r.dormitory?.refId)).map(r=>({nationalCode:r.profile.nationalCode,type:this.fRecord.value[r.profile.nationalCode]}))};this._dormRepository.register(e).subscribe(r=>window.location.replace(r.action))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.gz),t.Y36(i.qu),t.Y36(f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-index-page"]],decls:26,vars:5,consts:[[3,"formGroup","submit"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","refId"],["matColumnDef","amount"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"formControlName"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-title"),t._uU(3,"\u062e\u0648\u0627\u0628\u06af\u0627\u0647"),t.qZA(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,Z,2,0,"th",3),t.YNc(8,F,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,T,1,0,"th",3),t.YNc(11,A,2,1,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,D,2,0,"th",3),t.YNc(14,I,2,1,"td",4),t.BQk(),t.ynx(15,7),t.YNc(16,P,2,0,"th",3),t.YNc(17,R,2,1,"td",4),t.BQk(),t.ynx(18,8),t.YNc(19,J,2,0,"th",9),t.YNc(20,S,11,4,"td",4),t.BQk(),t.YNc(21,N,1,0,"tr",10),t.YNc(22,Q,1,0,"tr",11),t.qZA()(),t.TgZ(23,"mat-card-actions",12)(24,"button",13),t._uU(25,"\u067e\u0631\u062f\u0627\u062e\u062a"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",r.fRecord),t.xp6(5),t.Q6J("dataSource",r.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(2),t.Q6J("disabled",r.fRecord.invalid))},dependencies:[i._Y,i.JJ,i.JL,i.sg,i.u,p.KE,p.hX,y.lW,a.gD,C.ey,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.a8,d.hq,d.dn,d.n5]}),o})(),resolve:{dorms:o=>(0,t.f3M)(f).dorms}}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(U),l.Bz]}),o})();var M=n(35);let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[M._,Y,d.QW]}),o})()},35:(x,h,n)=>{n.d(h,{_:()=>y});var l=n(9759),m=n(9602),s=n(3238),t=n(5784),i=n(5412),c=n(4650);let g=(()=>{class a{}return a.\u0275fac=function(d){return new(d||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({providers:[{provide:s._A,useClass:t.e,deps:[s.Ad]},{provide:s.sG,useValue:t.A}],imports:[l.m,m.FA,i.Is]}),a})();var f=n(2143),p=n(3546);let y=(()=>{class a{}return a.\u0275fac=function(d){return new(d||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[l.m,g,f.p0,p.QW,l.m,g,f.p0,p.QW]}),a})()}}]);